<h1>Messages</h1>

<div class="col-sm-10 col-sm-offset-1">
  <div class="admin-component">
    <table class="table table-striped table-bordered table-condensed">
      <thead>
        <td></td>
        <td>Expediteur</td>
        <td>Objet</td>
        <td>Date</td>
        <td>Options</td>
      </thead>
      <tbody>
        <tr ng-repeat="m in messages |orderBy : '-created_at'" ng-class="{'message-read' : m.is_read==1}">
          <td><input type="checkbox" checklist-model="checkedMessages" checklist-value="m"></td>
          <td>{{m.author}}</td>
          <td>{{m.object}}</td>
          <td>{{m.created_at | date : 'dd MMM'}}</td>
          <td>
            <button class="button is-color1 text-white" ng-click="showMessage(m)">Lire</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div>
      <span>Selection : </span>
      <span class="button-group">
        <button class="button is-color1 text-white" ng-click="markAsRead(checkedMessages)">Marquer comme lu</button>
        <button class="button is-color2 text-white" ng-click="deleteMessage(checkedMessages)">Supprimer</button>
      </span>
    </div>

    <div class="selected-message" ng-if="messageSelected">
      <h2>Message<button class="close" ng-click="closeMessage()"><span>&times;</span></button></h2>
      <div>
        <strong>{{message.author}}</strong> {{message.email}}
      </div>
      <div>{{message.created_at | date : 'EEE dd MMM'}}</div>
      <div class="well">
        {{message.body}}
      </div>
      <button class="button is-color1 text-white">RÃ©pondre</button>
    </div>
  </div>
</div>
